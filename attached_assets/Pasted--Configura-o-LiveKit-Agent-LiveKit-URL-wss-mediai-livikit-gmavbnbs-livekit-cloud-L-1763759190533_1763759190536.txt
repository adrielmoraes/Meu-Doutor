
‚úÖ Configura√ß√£o LiveKit Agent:
  ‚Ä¢ LiveKit URL: wss://mediai-livikit-gmavbnbs.livekit.cloud
  ‚Ä¢ LiveKit API Key: APIrYvWHxL...
  ‚Ä¢ Gemini API: ‚úÖ Configurado (100% Gemini powered)
  ‚Ä¢ Avatar Providers Dispon√≠veis:
    - Tavus: ‚ö™ N√£o configurado
      API Key: ‚úó
      Replica ID: ‚úì
      Persona ID: ‚úì
    - Beyond Presence (BEY): üé≠ CONFIGURADO
      Avatar ID: 694c83e2-8895-4a98-bd16-56332ca3f449
  ‚Ä¢ Avatar Ativo: Definido no Admin Panel (banco de dados)
  ‚Ä¢ Database: ‚úÖ Configurado

============================================================
üé≠ Iniciando MediAI Agent...
   üì° Aguardando pacientes na sala LiveKit...
   üé• O avatar Tavus aparecer√° automaticamente quando
   üè• um paciente iniciar uma consulta!
   üß† 100% Gemini API (STT + LLM + TTS)
============================================================

{"level": "INFO", "name": "livekit.agents", "message": "starting worker", "version": "1.3.3", "rtc-version": "1.0.19", "timestamp": "2025-11-21T20:55:15.148462+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "preloading plugins", "packages": ["livekit.plugins.tavus", "livekit.plugins.bey", "livekit.plugins.google", "av"], "timestamp": "2025-11-21T20:55:15.148622+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "initializing process", "pid": 2689, "timestamp": "2025-11-21T20:55:17.774196+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "initializing process", "pid": 2691, "timestamp": "2025-11-21T20:55:17.781057+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "initializing process", "pid": 2693, "timestamp": "2025-11-21T20:55:17.788904+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "initializing process", "pid": 2695, "timestamp": "2025-11-21T20:55:17.804486+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "process initialized", "pid": 2691, "elapsed_time": 0.6, "timestamp": "2025-11-21T20:55:18.382352+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "process initialized", "pid": 2693, "elapsed_time": 0.63, "timestamp": "2025-11-21T20:55:18.421820+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "process initialized", "pid": 2689, "elapsed_time": 0.73, "timestamp": "2025-11-21T20:55:18.500760+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "process initialized", "pid": 2695, "elapsed_time": 0.71, "timestamp": "2025-11-21T20:55:18.514219+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "registered worker", "agent_name": "", "id": "AW_pYxGMknC89gR", "url": "wss://mediai-livikit-gmavbnbs.livekit.cloud", "region": "US East B", "protocol": 16, "timestamp": "2025-11-21T20:55:18.595871+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "received job request", "job_id": "AJ_xGzjtB9R2abf", "dispatch_id": "AD_pHKGjQEAZuCP", "room": "mediai-consultation-c8b5a464-aa1b-4a33-8eaf-306a67f068d2", "room_id": "RM_Sv5RfCTpV6rS", "agent_name": "", "resuming": false, "enable_recording": false, "timestamp": "2025-11-21T20:55:39.231662+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "initializing process", "pid": 2726, "timestamp": "2025-11-21T20:55:39.355043+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[MediAI] üéØ Starting agent for patient: c8b5a464-aa1b-4a33-8eaf-306a67f068d2", "pid": 2691, "job_id": "AJ_xGzjtB9R2abf", "room_id": "RM_Sv5RfCTpV6rS", "timestamp": "2025-11-21T20:55:39.459829+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[Metrics] üìä Iniciado coletor de m√©tricas para sess√£o mediai-consultation-c8b5a464-aa1b-4a33-8eaf-306a67f068d2", "pid": 2691, "job_id": "AJ_xGzjtB9R2abf", "room_id": "RM_Sv5RfCTpV6rS", "timestamp": "2025-11-21T20:55:39.459971+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[MediAI] üìã Loading patient context...", "pid": 2691, "job_id": "AJ_xGzjtB9R2abf", "room_id": "RM_Sv5RfCTpV6rS", "timestamp": "2025-11-21T20:55:39.460020+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "process initialized", "pid": 2726, "elapsed_time": 0.28, "timestamp": "2025-11-21T20:55:39.637766+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[MediAI] ‚úÖ Patient context loaded (651 chars)", "pid": 2691, "job_id": "AJ_xGzjtB9R2abf", "room_id": "RM_Sv5RfCTpV6rS", "timestamp": "2025-11-21T20:55:42.109416+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[MediAI] ü§ñ Creating Gemini Live API model...", "pid": 2691, "job_id": "AJ_xGzjtB9R2abf", "room_id": "RM_Sv5RfCTpV6rS", "timestamp": "2025-11-21T20:55:42.109566+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[MediAI] üéôÔ∏è Creating agent session with Gemini Live API...", "pid": 2691, "job_id": "AJ_xGzjtB9R2abf", "room_id": "RM_Sv5RfCTpV6rS", "timestamp": "2025-11-21T20:55:42.109600+00:00"}
{"level": "ERROR", "name": "livekit.agents", "message": "unhandled exception while running the job task\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/opentelemetry/util/_decorator.py\", line 71, in async_wrapper\n    return await func(*args, **kwargs)  # type: ignore\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/agents/ipc/job_proc_lazy_main.py\", line 275, in _traceable_entrypoint\n    await self._job_entrypoint_fnc(job_ctx)\n  File \"/home/runner/workspace/livekit-agent/agent.py\", line 1292, in entrypoint\n    agent = MediAIAgent(\n            ^^^^^^^^^^^^\n  File \"/home/runner/workspace/livekit-agent/agent.py\", line 835, in __init__\n    self.session = None  # Will be set after session creation\n    ^^^^^^^^^^^^\nAttributeError: property 'session' of 'MediAIAgent' object has no setter", "pid": 2691, "job_id": "AJ_xGzjtB9R2abf", "room_id": "RM_Sv5RfCTpV6rS", "timestamp": "2025-11-21T20:55:42.110221+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "process exiting", "reason": "room disconnected", "pid": 2691, "job_id": "AJ_xGzjtB9R2abf", "room_id": "RM_Sv5RfCTpV6rS", "timestamp": "2025-11-21T21:00:43.860471+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "received job request", "job_id": "AJ_7SBHg2MZjKLd", "dispatch_id": "AD_PbqQ9YNnMBkj", "room": "mediai-consultation-c8b5a464-aa1b-4a33-8eaf-306a67f068d2", "room_id": "RM_yiUXFyffwThH", "agent_name": "", "resuming": false, "enable_recording": false, "timestamp": "2025-11-21T21:02:22.393043+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "initializing process", "pid": 2786, "timestamp": "2025-11-21T21:02:22.456938+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[MediAI] üéØ Starting agent for patient: c8b5a464-aa1b-4a33-8eaf-306a67f068d2", "pid": 2693, "job_id": "AJ_7SBHg2MZjKLd", "room_id": "RM_yiUXFyffwThH", "timestamp": "2025-11-21T21:02:22.636675+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[Metrics] üìä Iniciado coletor de m√©tricas para sess√£o mediai-consultation-c8b5a464-aa1b-4a33-8eaf-306a67f068d2", "pid": 2693, "job_id": "AJ_7SBHg2MZjKLd", "room_id": "RM_yiUXFyffwThH", "timestamp": "2025-11-21T21:02:22.636792+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[MediAI] üìã Loading patient context...", "pid": 2693, "job_id": "AJ_7SBHg2MZjKLd", "room_id": "RM_yiUXFyffwThH", "timestamp": "2025-11-21T21:02:22.636825+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "process initialized", "pid": 2786, "elapsed_time": 0.5, "timestamp": "2025-11-21T21:02:22.952340+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[MediAI] ‚úÖ Patient context loaded (651 chars)", "pid": 2693, "job_id": "AJ_7SBHg2MZjKLd", "room_id": "RM_yiUXFyffwThH", "timestamp": "2025-11-21T21:02:25.560701+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[MediAI] ü§ñ Creating Gemini Live API model...", "pid": 2693, "job_id": "AJ_7SBHg2MZjKLd", "room_id": "RM_yiUXFyffwThH", "timestamp": "2025-11-21T21:02:25.560827+00:00"}
{"level": "INFO", "name": "mediai-avatar", "message": "[MediAI] üéôÔ∏è Creating agent session with Gemini Live API...", "pid": 2693, "job_id": "AJ_7SBHg2MZjKLd", "room_id": "RM_yiUXFyffwThH", "timestamp": "2025-11-21T21:02:25.560856+00:00"}
{"level": "ERROR", "name": "livekit.agents", "message": "unhandled exception while running the job task\nTraceback (most recent call last):\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/opentelemetry/util/_decorator.py\", line 71, in async_wrapper\n    return await func(*args, **kwargs)  # type: ignore\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/livekit/agents/ipc/job_proc_lazy_main.py\", line 275, in _traceable_entrypoint\n    await self._job_entrypoint_fnc(job_ctx)\n  File \"/home/runner/workspace/livekit-agent/agent.py\", line 1292, in entrypoint\n    agent = MediAIAgent(\n            ^^^^^^^^^^^^\n  File \"/home/runner/workspace/livekit-agent/agent.py\", line 835, in __init__\n    self.session = None  # Will be set after session creation\n    ^^^^^^^^^^^^\nAttributeError: property 'session' of 'MediAIAgent' object has no setter", "pid": 2693, "job_id": "AJ_7SBHg2MZjKLd", "room_id": "RM_yiUXFyffwThH", "timestamp": "2025-11-21T21:02:25.561415+00:00"}
{"level": "INFO", "name": "livekit.agents", "message": "process exiting", "reason": "", "pid": 2693, "job_id": "AJ_7SBHg2MZjKLd", "room_id": "RM_yiUXFyffwThH", "timestamp": "2025-11-21T21:05:33.859311+00:00"}
